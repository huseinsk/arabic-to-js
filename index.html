<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø­ÙˆÙ„ Ø¹Ø±Ø¨ÙŠ â†’ ÙƒÙˆØ¯ (Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø£Ù‚ÙˆÙ‰)</title>
<style>
  body { font-family: Arial, sans-serif; background: #0b1220; color: #e9ecef; margin:0; padding:0; }
  .container { max-width: 1100px; margin: 0 auto; padding: 20px; }
  h1 { text-align:center; margin-bottom:10px; }
  .card { background:#111a2b; padding:20px; border-radius: 16px; box-shadow: 0 6px 18px rgba(0,0,0,0.4); }
  .row { display:flex; gap:15px; flex-wrap:wrap; }
  .col { flex:1; min-width:240px; }
  label { display:block; margin-bottom:8px; font-weight:600; }
  select, textarea, input { width:100%; padding:10px; border-radius:10px; border:1px solid #2c3e50; background:#0b1220; color:#e9ecef; }
  textarea { min-height:140px; resize: vertical; }
  button { padding:12px 18px; border:none; border-radius:12px; background:#2a69ff; color:#fff; cursor:pointer; font-weight:700; }
  button:hover { background:#1a4dff; }
  .output { white-space: pre-wrap; background:#0b1220; border:1px solid #2c3e50; padding:15px; border-radius:12px; min-height:140px; }
  .footer { text-align:center; margin-top:15px; color:#a9b0c2; font-size:12px; }
  .btn-row { display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
  .small { font-size:12px; color:#a9b0c2; margin-top:10px; }
</style>
</head>
<body>

<div class="container">
  <h1>Ù…Ø­ÙˆÙ„ Ø¹Ø±Ø¨ÙŠ â†’ ÙƒÙˆØ¯ (Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø£Ù‚ÙˆÙ‰)</h1>

  <div class="card">
    <div class="row">
      <div class="col">
        <label>Ø£ÙƒØªØ¨ Ø§Ù„Ø£Ù…Ø± Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ</label>
        <textarea id="input" placeholder="Ù…Ø«Ø§Ù„: Ø§Ø·Ø¨Ø¹ 'Ù…Ø±Ø­Ø¨Ø§'"></textarea>

        <div class="btn-row">
          <button onclick="convert()">Ø­ÙˆÙ‘Ù„ Ø§Ù„Ø¢Ù†</button>
          <button onclick="saveFavorite()">Ø­ÙØ¸ ÙƒÙ€ Ù…ÙØ¶Ù„</button>
          <button onclick="downloadCode()">ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯</button>
        </div>

        <div class="small">
          <strong>Ø§Ù„Ù…ÙØ¶Ù„Ø©:</strong>
          <select id="favorites" onchange="loadFavorite()">
            <option value="">-- Ø§Ø®ØªØ± Ù…ÙØ¶Ù„Ø© --</option>
          </select>
        </div>
      </div>

      <div class="col">
        <label>Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©</label>
        <select id="language">
          <option value="js">JavaScript</option>
          <option value="python">Python</option>
          <option value="php">PHP</option>
          <option value="java">Java</option>
          <option value="csharp">C#</option>
          <option value="cpp">C++</option>
          <option value="ruby">Ruby</option>
          <option value="go">Go</option>
        </select>

        <label>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªØ­ÙˆÙŠÙ„</label>
        <select id="mode">
          <option value="general">Ø¹Ø§Ù…</option>
          <option value="html">HTML</option>
          <option value="css">CSS</option>
          <option value="dom">DOM</option>
          <option value="api">API</option>
          <option value="sql">SQL</option>
          <option value="project">ØªÙˆÙ„ÙŠØ¯ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø§Ù‡Ø²</option>
        </select>

        <div class="btn-row">
          <button onclick="clearHistory()">Ù…Ø³Ø­ Ø§Ù„ØªØ§Ø±ÙŠØ®</button>
          <button onclick="showHistory()">Ø¹Ø±Ø¶ Ø§Ù„ØªØ§Ø±ÙŠØ®</button>
        </div>
      </div>
    </div>

    <div style="margin-top:15px;">
      <label>Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù†Ø§ØªØ¬</label>
      <div id="output" class="output">Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙƒÙˆØ¯ Ø¨Ø¹Ø¯</div>
    </div>
  </div>

  <div class="card" style="margin-top:15px;">
    <h2>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª</h2>
    <div id="history" class="output"></div>
  </div>

  <div class="footer">
    Ù†Ø³Ø®Ø© Ù‚ÙˆÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ© - ÙƒÙ„ Ø´ÙŠØ¡ Ø¯Ø§Ø®Ù„ Ù…Ù„Ù ÙˆØ§Ø­Ø¯ - Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ·ÙˆÙŠØ± ğŸš€
  </div>
</div>

<script>
const commands = [
  { lang: "all", mode: "general", regex: /Ø§Ø·Ø¨Ø¹\s+['"](.*)['"]/i, type: "print" },
  { lang: "all", mode: "general", regex: /Ø§Ù†Ø´Ø¦\s+Ù…ØªØºÙŠØ±\s+(\w+)\s*=\s*(.*)/i, type: "variable" },
  { lang: "all", mode: "general", regex: /Ø³ÙˆÙŠ\s+Ø­Ù„Ù‚Ù‡\s+(\d+)\s+Ù…Ø±Ø©/i, type: "for" },
  { lang: "all", mode: "general", regex: /Ø§Ù†Ø´Ø¦\s+Ø¯Ø§Ù„Ø©\s+(\w+)\s*\((.*)\)/i, type: "function" },
  { lang: "all", mode: "html", regex: /Ø§Ù†Ø´Ø¦ Ø¹Ù†ØµØ± div/i, type: "html_div" },
  { lang: "all", mode: "html", regex: /Ø§Ù†Ø´Ø¦ Ø¹Ù†ØµØ± button/i, type: "html_button" },
  { lang: "all", mode: "css", regex: /Ø®Ù„ÙÙŠØ©\s+Ø§Ø­Ù…Ø±/i, type: "css_bg_red" },
  { lang: "all", mode: "css", regex: /Ø­Ø¬Ù… Ø§Ù„Ø®Ø·\s+(\d+)\s*px/i, type: "css_font_size" },
  { lang: "all", mode: "dom", regex: /Ø§Ø®Ø° Ø¹Ù†ØµØ± id\s*=\s*(\w+)/i, type: "dom_get_by_id" },
  { lang: "all", mode: "api", regex: /(https?:\/\/\S+)/i, type: "api_fetch" },
  { lang: "all", mode: "sql", regex: /Ø§Ù†Ø´Ø¦ Ø¬Ø¯ÙˆÙ„\s+(\w+)/i, type: "sql_create_table" },
  { lang: "all", mode: "project", regex: /Ø³ÙˆÙŠ Ù…Ø´Ø±ÙˆØ¹/i, type: "project_basic" }
];

// 10000 Ø£Ù…Ø± (Ù…Ù…ÙƒÙ† ØªØ²ÙŠØ¯Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹)
const hugeCommands = [];
for (let i = 0; i < 10000; i++) {
  hugeCommands.push({ lang: "all", mode: "general", regex: new RegExp(`Ø§Ù…Ø±${i}`, "i"), type: `huge_${i}` });
}
commands.push(...hugeCommands);

const history = JSON.parse(localStorage.getItem("history") || "[]");
const favorites = JSON.parse(localStorage.getItem("favorites") || "[]");

function saveFavorite() {
  const input = document.getElementById("input").value.trim();
  if (!input) return alert("Ø§ÙƒØªØ¨ Ø£Ù…Ø± Ø£ÙˆÙ„Ø§Ù‹");
  favorites.push(input);
  localStorage.setItem("favorites", JSON.stringify(favorites));
  updateFavorites();
}

function updateFavorites() {
  const select = document.getElementById("favorites");
  select.innerHTML = "<option value=''>-- Ø§Ø®ØªØ± Ù…ÙØ¶Ù„Ø© --</option>";
  favorites.forEach((f, idx) => {
    select.innerHTML += `<option value="${idx}">${f}</option>`;
  });
}

function loadFavorite() {
  const idx = document.getElementById("favorites").value;
  if (idx === "") return;
  document.getElementById("input").value = favorites[idx];
}

function addHistory(entry) {
  history.unshift(entry);
  localStorage.setItem("history", JSON.stringify(history.slice(0, 50)));
}

function showHistory() {
  const historyDiv = document.getElementById("history");
  historyDiv.innerText = history.map(h => `${h.time} | ${h.input} â†’ ${h.output}`).join("\n\n");
}

function clearHistory() {
  localStorage.removeItem("history");
  history.length = 0;
  document.getElementById("history").innerText = "";
}

function downloadCode() {
  const code = document.getElementById("output").innerText;
  if (!code || code === "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙƒÙˆØ¯ Ø¨Ø¹Ø¯") return alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙƒÙˆØ¯ Ù„ØªØ­Ù…ÙŠÙ„Ù‡");
  const blob = new Blob([code], { type: "text/plain" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "code.txt";
  a.click();
  URL.revokeObjectURL(url);
}

function convert() {
  const input = document.getElementById("input").value.trim();
  const lang = document.getElementById("language").value;
  const mode = document.getElementById("mode").value;

  if (!input) {
    document.getElementById("output").innerText = "Ø§ÙƒØªØ¨ Ø£Ù…Ø± Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø£ÙˆÙ„Ø§Ù‹";
    return;
  }

  let output = "// Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ­ÙˆÙŠÙ„ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø±";

  for (let cmd of commands) {
    if (cmd.mode !== mode && cmd.mode !== "all") continue;
    const m = input.match(cmd.regex);
    if (m) {
      output = generate(cmd.type, lang, m[1], m[2]);
      break;
    }
  }

  document.getElementById("output").innerText = output;
  addHistory({ time: new Date().toLocaleString(), input, output });
  showHistory();
}

function generate(type, lang, a, b) {
  if (type === "print") {
    if (lang === "js") return `console.log("${a}");`;
    if (lang === "python") return `print("${a}")`;
    if (lang === "php") return `echo "${a}";`;
    if (lang === "java") return `System.out.println("${a}");`;
    if (lang === "csharp") return `Console.WriteLine("${a}");`;
    if (lang === "cpp") return `std::cout << "${a}" << std::endl;`;
    if (lang === "ruby") return `puts "${a}"`;
    if (lang === "go") return `fmt.Println("${a}")`;
  }

  if (type === "variable") {
    if (lang === "js") return `let ${a} = ${b};`;
    if (lang === "python") return `${a} = ${b}`;
    if (lang === "php") return `$${a} = ${b};`;
    if (lang === "java") return `int ${a} = ${b};`;
    if (lang === "csharp") return `int ${a} = ${b};`;
    if (lang === "cpp") return `int ${a} = ${b};`;
    if (lang === "ruby") return `${a} = ${b}`;
    if (lang === "go") return `var ${a} = ${b}`;
  }

  if (type === "for") {
    if (lang === "js") return `for (let i = 0; i < ${a}; i++) {\n  console.log(i);\n}`;
    if (lang === "python") return `for i in range(${a}):\n  print(i)`;
    if (lang === "php") return `for ($i = 0; $i < ${a}; $i++) {\n  echo $i;\n}`;
    if (lang === "java") return `for (int i = 0; i < ${a}; i++) {\n  System.out.println(i);\n}`;
    if (lang === "csharp") return `for (int i = 0; i < ${a}; i++) {\n  Console.WriteLine(i);\n}`;
    if (lang === "cpp") return `for (int i = 0; i < ${a}; i++) {\n  std::cout << i << std::endl;\n}`;
    if (lang === "ruby") return `${a}.times do |i|\n  puts i\nend`;
    if (lang === "go") return `for i := 0; i < ${a}; i++ {\n  fmt.Println(i)\n}`;
  }

  if (type === "function") {
    if (lang === "js") return `function ${a}(${b}) {\n  // code\n}`;
    if (lang === "python") return `def ${a}(${b}):\n  # code`;
    if (lang === "php") return `function ${a}(${b}) {\n  // code\n}`;
    if (lang === "java") return `public static void ${a}(${b}) {\n  // code\n}`;
    if (lang === "csharp") return `public static void ${a}(${b}) {\n  // code\n}`;
    if (lang === "cpp") return `void ${a}(${b}) {\n  // code\n}`;
    if (lang === "ruby") return `def ${a}(${b})\n  # code\nend`;
    if (lang === "go") return `func ${a}(${b}) {\n  // code\n}`;
  }

  if (type === "html_div") return `<div></div>`;
  if (type === "html_button") return `<button>Ø²Ø±</button>`;
  if (type === "css_bg_red") return `background-color: red;`;
  if (type === "css_font_size") return `font-size: ${a}px;`;
  if (type === "dom_get_by_id") return `document.getElementById("${a}");`;
  if (type === "api_fetch") return `fetch("${a}")\n  .then(res => res.json())\n  .then(data => console.log(data));`;
  if (type === "sql_create_table") return `CREATE TABLE ${a} (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  name VARCHAR(255)\n);`;
  if (type === "project_basic") {
    return `
<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø§Ù‡Ø²</title>
<style>
  body { font-family: Arial, sans-serif; background:#0b1220; color:#e9ecef; }
  .container { max-width: 900px; margin: 0 auto; padding:20px; }
  .card { background:#111a2b; padding:20px; border-radius:16px; }
  button { padding:10px 15px; border:none; border-radius:10px; background:#2a69ff; color:#fff; cursor:pointer; }
</style>
</head>
<body>
<div class="container">
  <div class="card">
    <h1>Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø§Ù‡Ø²</h1>
    <button onclick="alert('ØªÙ…!')">Ø§Ø¶ØºØ· Ù‡Ù†Ø§</button>
  </div>
</div>
<script>
  console.log("Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø§Ù‡Ø²");
</script>
</body>
</html>`;
  }

  if (type.startsWith("huge_")) {
    return "// Ø£Ù…Ø± ÙƒØ¨ÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ù„ÙƒÙ† Ù„Ù… ÙŠØªÙ… ØªØ¹Ø±ÙŠÙÙ‡ ÙØ¹Ù„ÙŠØ§Ù‹ (ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ Ù‡Ù†Ø§)";
  }

  return "// Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ­ÙˆÙŠÙ„ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø±";
}

updateFavorites();
showHistory();
</script>

</body>
  </html>
